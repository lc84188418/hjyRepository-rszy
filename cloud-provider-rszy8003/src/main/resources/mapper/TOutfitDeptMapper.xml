<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hjy.cloud.t_outfit.dao.TOutfitDeptMapper">

    <resultMap type="com.hjy.cloud.t_outfit.entity.TOutfitDept" id="TOutfitDeptMap">
        <result property="pkDeptId" column="PK_DEPT_ID" jdbcType="VARCHAR"/>
        <result property="deptName" column="DEPT_NAME" jdbcType="VARCHAR"/>
        <result property="deptAddress" column="DEPT_ADDRESS" jdbcType="VARCHAR"/>
        <result property="createTime" column="CREATE_TIME" jdbcType="TIMESTAMP"/>
        <result property="deptLevel" column="DEPT_LEVEL" jdbcType="VARCHAR"/>
        <result property="superiorDept" column="SUPERIOR_DEPT" jdbcType="VARCHAR"/>
        <result property="deptLeader" column="DEPT_LEADER" jdbcType="VARCHAR"/>
        <result property="remarks" column="REMARKS" jdbcType="VARCHAR"/>
        <result property="modifyTime" column="MODIFY_TIME" jdbcType="TIMESTAMP"/>
        <result property="leaderCard" column="LEADER_CARD" jdbcType="VARCHAR"/>
        <result property="maxNum" column="MAX_NUM" jdbcType="INTEGER"/>
    </resultMap>

    <!--通过主键查询单个-->
    <select id="selectById" resultType="com.hjy.cloud.t_outfit.entity.TOutfitDept" parameterType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        select * from T_SYS_DEPT where PK_DEPT_ID = #{pkDeptId,jdbcType=VARCHAR}
    </select>
    <!--通过实体作为筛选条件查询-->
    <select id="selectAllByEntity" resultType="com.hjy.cloud.t_outfit.entity.TOutfitDept"
            parameterType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        select * from T_SYS_DEPT
        <where>
            <if test="pkDeptId != null">
                and "PK_DEPT_ID" = #{pkDeptId,jdbcType=VARCHAR}
            </if>
            <if test="deptName != null and deptName != ''">
                and "DEPT_NAME" = #{deptName,jdbcType=VARCHAR}
            </if>
            <if test="deptAddress != null and deptAddress != ''">
                and "DEPT_ADDRESS" = #{deptAddress,jdbcType=VARCHAR}
            </if>
            <if test="createTime != null">
                and CREATE_TIME = #{createTime,jdbcType=TIMESTAMP}
            </if>
            <if test="deptLevel != null and deptLevel != ''">
                and DEPT_LEVEL = #{deptLevel,jdbcType=VARCHAR}
            </if>
            <if test="superiorDept != null and superiorDept != ''">
                and SUPERIOR_DEPT = #{superiorDept,jdbcType=VARCHAR}
            </if>
            <if test="deptLeader != null and deptLeader != ''">
                and DEPT_LEADER = #{deptLeader,jdbcType=VARCHAR}
            </if>
            <if test="remarks != null and remarks != ''">
                and "REMARKS" = #{remarks,jdbcType=VARCHAR}
            </if>
            <if test="modifyTime != null">
                and MODIFY_TIME = #{modifyTime,jdbcType=TIMESTAMP}
            </if>
            <if test="leaderCard != null and leaderCard != ''">
                and LEADER_CARD = #{leaderCard,jdbcType=VARCHAR}
            </if>
        </where>
    </select>
    <!--No problem 新增数据-->
    <insert id="insertSelective" parameterType="com.hjy.cloud.t_outfit.entity.TOutfitDept" >
        insert into T_SYS_DEPT
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="pkDeptId != null and pkDeptId != ''">
                PK_DEPT_ID,
            </if>
            <if test="deptName != null and deptName != ''">
                DEPT_NAME,
            </if>
            <if test="deptAddress != null and deptAddress != ''">
                DEPT_ADDRESS,
            </if>
            <if test="createTime != null">
                CREATE_TIME,
            </if>
            <if test="deptLevel != null and deptLevel != ''">
                DEPT_LEVEL,
            </if>
            <if test="superiorDept != null and superiorDept != ''">
                SUPERIOR_DEPT,
            </if>
            <if test="deptLeader != null and deptLeader != ''">
                DEPT_LEADER,
            </if>
            <if test="remarks != null and remarks != ''">
                REMARKS,
            </if>
            <if test="modifyTime != null">
                MODIFY_TIME,
            </if>
            <if test="leaderCard != null and leaderCard != ''">
                LEADER_CARD,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="pkDeptId != null and pkDeptId != ''">
                #{pkDeptId,jdbcType=VARCHAR},
            </if>
            <if test="deptName != null and deptName != ''">
                #{deptName,jdbcType=VARCHAR},
            </if>
            <if test="deptAddress != null and deptAddress != ''">
                #{deptAddress,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="deptLevel != null and deptLevel != ''">
                #{deptLevel,jdbcType=VARCHAR},
            </if>
            <if test="superiorDept != null and superiorDept != ''">
                #{superiorDept,jdbcType=VARCHAR},
            </if>
            <if test="deptLeader != null and deptLeader != ''">
                #{deptLeader,jdbcType=VARCHAR},
            </if>
            <if test="remarks != null and remarks != ''">
                #{remarks,jdbcType=VARCHAR},
            </if>
            <if test="modifyTime != null">
                #{modifyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="leaderCard != null and leaderCard != ''">
                #{leaderCard,jdbcType=VARCHAR}
            </if>
        </trim>
    </insert>

    <!--通过主键修改数据-->
    <update id="updateById" parameterType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        update T_SYS_DEPT
        <set>
            <if test="deptName != null and deptName != ''">
                DEPT_NAME = #{deptName,jdbcType=VARCHAR},
            </if>
            <if test="deptAddress != null and deptAddress != ''">
                DEPT_ADDRESS = #{deptAddress,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="deptLevel != null and deptLevel != ''">
                DEPT_LEVEL = #{deptLevel,jdbcType=VARCHAR},
            </if>
            <if test="superiorDept != null and superiorDept != ''">
                SUPERIOR_DEPT = #{superiorDept,jdbcType=VARCHAR},
            </if>
            <if test="deptLeader != null and deptLeader != ''">
                DEPT_LEADER = #{deptLeader,jdbcType=VARCHAR},
            </if>
            <if test="remarks != null and remarks != ''">
                REMARKS = #{remarks,jdbcType=VARCHAR},
            </if>
            <if test="modifyTime != null">
                MODIFY_TIME = #{modifyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="leaderCard != null and leaderCard != ''">
                LEADER_CARD = #{leaderCard,jdbcType=VARCHAR},
            </if>
        </set>
        where PK_DEPT_ID = #{pkDeptId,jdbcType=VARCHAR}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById" parameterType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        delete from T_SYS_DEPT where PK_DEPT_ID = #{pkDeptId,jdbcType=VARCHAR}
    </delete>
    <!--查询所有行数据-->
    <select id="selectAll" resultType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        select * from T_SYS_DEPT
    </select>
    <select id="selectAllIdAndName" resultType="com.hjy.cloud.t_outfit.entity.TOutfitDept">
        select PK_DEPT_ID,DEPT_NAME from t_sys_dept
    </select>
    <!--No problem 查询所有部门单位数据-->
    <select id="selectAllDeptName" resultType="java.lang.String">
        select DEPT_NAME from T_SYS_DEPT
    </select>

    <select id="selectDeptUser_userIded" resultType="java.lang.String">
        select FK_USER_ID from RE_DEPT_USER where FK_DEPT_ID in (select distinct FK_DEPT_ID from  RE_DEPT_USER)
    </select>
    <select id="selectDeptUserByDept" resultType="java.lang.String" parameterType="java.lang.String">
        select FK_USER_ID from RE_DEPT_USER where FK_DEPT_ID = #{fkDeptId,jdbcType=VARCHAR}
    </select>
    <select id="selectDeptIdByUserId" resultType="java.lang.String">
        select FK_DEPT_ID from RE_DEPT_USER where FK_USER_ID = #{fkUserId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteDeptUserByDeptId" parameterType="java.lang.String">
        delete from RE_DEPT_USER where FK_DEPT_ID =#{fkDeptId,jdbcType=VARCHAR}
    </delete>
    <!--部门批量添加用户    -->
    <insert id="addDeptUserByList" parameterType="list">
        insert  INTO
        RE_DEPT_USER(pk_deptuser_id,FK_DEPT_ID,FK_USER_ID)
        values
        <foreach collection="idList" item="item" index="index" separator=",">
            (
            #{item.pk_deptUser_id, jdbcType=VARCHAR},
            #{item.fk_dept_id, jdbcType=VARCHAR},
            #{item.fk_user_id, jdbcType=VARCHAR}
            )
        </foreach>
    </insert>
    <!--No problem 添加用户部门    -->
    <insert id="addDeptUserByDeptUser" parameterType="com.hjy.cloud.t_system.entity.ReDeptUser">
       insert into RE_DEPT_USER(PK_DEPTUSER_ID,FK_DEPT_ID,FK_USER_ID)
        values (#{pk_deptUser_id},#{fk_dept_id},#{fk_user_id})
    </insert>
    <!--No problem 删除用户部门    -->
    <delete id="deleteDeptUserByUserId" parameterType="java.lang.String">
        delete from RE_DEPT_USER where FK_USER_ID =#{fkUserId,jdbcType=VARCHAR}
    </delete>
</mapper>